import{c as f,r as m,D as b,A as p,j as t,N as y}from"./index-DdO9dkMd.js";import{A as k}from"./AddPointForm-CnxXM9_B.js";const w=()=>{const e=f.c(15),{points:a,updatePoint:o,deletePoint:h}=m.use(b),{user:u}=m.use(p),[l,x]=m.useState(null);if(!u){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(y,{to:"/",replace:!0}),e[0]=s):s=e[0],s}if(u.name!=="admin"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsxs("div",{className:"access-denied",children:[t.jsx("h2",{children:"Brak dostępu!"}),t.jsx("p",{children:'Tylko użytkownik o nazwie "admin" ma tu wstęp.'})]}),e[1]=s):s=e[1],s}let r;e[2]!==l||e[3]!==o?(r=s=>{l&&(o(l.id,s),x(null),alert("Zaktualizowano pomyślnie!"))},e[2]=l,e[3]=o,e[4]=r):r=e[4];const j=r;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("h1",{children:"Panel Moderacji"}),e[5]=d):d=e[5];let i;e[6]!==h||e[7]!==a?(i=a.length===0?t.jsx("p",{children:"Brak punktów w bazie."}):t.jsxs("table",{className:"points-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Zdjęcie"}),t.jsx("th",{children:"Nazwa"}),t.jsx("th",{children:"Koordynaty"}),t.jsx("th",{children:"Autor"}),t.jsx("th",{children:"Typ"}),t.jsx("th",{children:"Akcja"})]})}),t.jsx("tbody",{children:a.map(s=>t.jsxs("tr",{children:[t.jsx("td",{children:s.image?t.jsx("img",{src:s.image,alt:"mini",className:"point-thumbnail"}):"brak"}),t.jsx("td",{children:t.jsx("strong",{children:s.title})}),t.jsx("td",{children:t.jsxs("small",{children:[s.lat.toFixed(3),", ",s.lng.toFixed(3)]})}),t.jsx("td",{children:s.author}),t.jsx("td",{children:s.type}),t.jsx("td",{children:t.jsx("button",{onClick:()=>x(s),className:"btn-delete",children:"Edytuj"})}),t.jsx("td",{children:t.jsx("button",{onClick:()=>h(s.id),className:"btn-delete",children:"Usuń"})})]},s.id))})]}),e[6]=h,e[7]=a,e[8]=i):i=e[8];let n;e[9]!==l||e[10]!==j?(n=l&&t.jsx(k,{initialData:l,onSave:j,onCancel:()=>x(null)}),e[9]=l,e[10]=j,e[11]=n):n=e[11];let c;return e[12]!==i||e[13]!==n?(c=t.jsxs("div",{className:"admin-container",children:[d,i,n]}),e[12]=i,e[13]=n,e[14]=c):c=e[14],c};export{w as default};
